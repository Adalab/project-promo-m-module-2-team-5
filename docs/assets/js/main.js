"use strict";const resetButton=document.querySelector(".js-reset-btn"),inputEls=document.querySelectorAll(".form__fill__input"),previewPhotoElement=document.querySelector(".js__profile-preview");function resetPreview(){previewNameElement.innerHTML="Nombre Apellidos",previewJobElement.innerHTML="Front-end developer",previewEmailElement.href="",previewPhoneElement.href="",previewLinkedinElement.href="",previewGithubElement.href="",previewPhotoElement.style.backgroundImage="",profileImage.style.backgroundImage=""}function resetData(){for(let e=0;e<inputEls.length;e++)inputEls[e].value="";const e=document.querySelectorAll(".coloroption");for(const o of e)o.checked=!1;e[0].checked=!0;colorOrigin("1"),resetPreview()}resetButton.addEventListener("click",resetData);const collapsableHeaders=document.querySelectorAll(".js-collapsable-header");for(const e of collapsableHeaders)e.addEventListener("click",handlerCollapsable);function handlerCollapsable(e){const o=e.currentTarget.parentNode,r=document.querySelectorAll(".js-collapsable-container");for(const e of r)o===e?e.classList.toggle("collapsable--close"):e.classList.add("collapsable--close")}const hiddenButton=document.querySelector(".js-hidden");function handleHiddenButton(e){const o=document.querySelector(".js-hidden-collapsable");e.currentTarget!==o&&o.classList.remove("hidden")}hiddenButton.addEventListener("click",handleHiddenButton);const colorOptions=document.querySelectorAll(".coloroption");console.log(colorOptions);const colorNameEl=document.querySelector(".card__name"),colorLineEl=document.querySelector(".card__line"),colorIconBorderEl=document.querySelectorAll(".contact__icon"),colorIconEl=document.querySelectorAll(".icon");function changeColors(e){colorOrigin(e.currentTarget.value)}function colorOrigin(e){if("1"===e){colorNameEl.classList.add("card__name--color"),colorNameEl.classList.remove("color-2a","color-3a"),colorLineEl.classList.add("card__line--color"),colorLineEl.classList.remove("color-2b","color-3b");for(const e of colorIconBorderEl)e.classList.add("contact__icon--color"),e.classList.remove("color-2c","color-3c");for(const e of colorIconEl)e.classList.add("icon--color"),e.classList.remove("color-2a","color-3a")}if("2"===e){colorNameEl.classList.add("color-2a"),colorNameEl.classList.remove("card__name--color","color-3a"),colorLineEl.classList.add("color-2b"),colorLineEl.classList.remove("card__line--color","color-3b");for(const e of colorIconBorderEl)e.classList.add("color-2c"),e.classList.remove("contact__icon--color","color-3c");for(const e of colorIconEl)e.classList.add("color-2a"),e.classList.remove("icon--color","color-3a")}if("3"===e){colorNameEl.classList.add("color-3a"),colorNameEl.classList.remove("card__name--color","color-2a"),colorLineEl.classList.add("color-3b"),colorLineEl.classList.remove("card__line--color","color-2b");for(const e of colorIconBorderEl)e.classList.add("color-3c"),e.classList.remove("contact__icon--color","color-2c");for(const e of colorIconEl)e.classList.add("color-3a"),e.classList.remove("icon--color","color-2a")}}for(const e of colorOptions)e.addEventListener("change",changeColors);const form=document.querySelector(".js-form"),previewNameElement=document.querySelector(".js-preview-name"),previewJobElement=document.querySelector(".js-preview-job"),previewEmailElement=document.querySelector(".js-preview-mail"),previewPhoneElement=document.querySelector(".js-preview-phone"),previewLinkedinElement=document.querySelector(".js-preview-linkedin"),previewGithubElement=document.querySelector(".js-preview-github"),data={palette:"1",name:"",job:"",photo:"",email:"",phone:"",linkedin:"",github:""};function refreshData(e){const o=e.target.name,r=e.target.value;data[o]=r,console.log(data)}function renderPreview(){previewNameElement.innerHTML=""===data.name?"Nombre Apellido":data.name,previewJobElement.innerHTML=""===data.job?"Front-end developer":data.job,previewEmailElement.href=""===data.email?"":data.email,previewPhoneElement.href=""===data.phone?"":data.phone,previewLinkedinElement.href=""===data.linkedin?"https://linkedin.com":"https://www.linkedin.com/in/"+data.linkedin,previewGithubElement.href=""===data.github?"https://github.com":"https://github.com/"+data.github}function handleChangeForm(e){refreshData(e),renderPreview()}form.addEventListener("change",handleChangeForm),console.log(">> Form Ready :)");const fr=new FileReader,uploadBtn=document.querySelector(".js__profile-trigger"),fileField=document.querySelector(".js__profile-upload-btn"),profileImage=document.querySelector(".js__profile-image"),profilePreview=document.querySelector(".js__profile-preview");let photo="";function getImage(e){const o=e.currentTarget.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(o)}function writeImage(){photo=fr.result,updatePhoto()}function updatePhoto(){const e=photo;""!==e&&(profilePreview.style.backgroundImage=`url(${e})`,profileImage.style.backgroundImage=`url(${e})`)}function clearPhoto(){photo="",profilePreview.style.backgroundImage="",profileImage.style.backgroundImage=""}function fakeFileClick(e){e.preventDefault(),fileField.click()}uploadBtn.addEventListener("click",fakeFileClick),fileField.addEventListener("change",getImage);const createButton=document.querySelector(".js-buttonCreateCard"),responseElement=document.querySelector(".js-response"),twitterContainer=document.querySelector(".js-hidden-collapsable"),urlElement=document.querySelector(".js-url");function handleClickCreate(e){""===data.name?(responseElement.innerHTML="Recuerda completar el campo 'Nombre'.",responseElement.classList.remove("hiddenIt")):""===data.job?(responseElement.innerHTML="<p>Recuerda completar el campo 'Puesto'.</p>",responseElement.classList.remove("hiddenIt")):""===data.photo?(responseElement.innerHTML="<p>Recuerda subir una imagen.</p>",responseElement.classList.remove("hiddenIt")):""===data.email?(responseElement.innerHTML="<p>Recuerda completar el campo 'Email'.</p>",responseElement.classList.remove("hiddenIt")):pruebaemail(data.email)?(responseElement.innerHTML="<p>Revisa tu email porque no es del todo correcto.</p>",responseElement.classList.remove("hiddenIt")):""===data.linkedin?(responseElement.innerHTML="<p>Recuerda completar el campo 'Linkedin'</p>.",responseElement.classList.remove("hiddenIt")):""===data.github?(responseElement.innerHTML="<p>Recuerda completar el campo 'Github'.</p>",responseElement.classList.remove("hiddenIt")):fetch("https://awesome-profile-cards.herokuapp.com/card",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(data)}).then(e=>e.json()).then(e=>{!1===e.success?(responseElement.innerHTML="<p>Revisa los campos sin completar</p>",responseElement.classList.remove("hidden")):(urlElement.innerHTML=`\n                    <p><a href="${e.cardURL}">${e.cardURL}</a></p>`,responseElement.classList.remove("hidden"))}).catch(()=>{responseElement.innerHTML='<p class="error">El servidor parece estar fuera de servicio. Paciencia. Inténtalo más tarde.</p>',responseElement.classList.remove("hidden")})}function pruebaemail(e){return!/^([\da-z_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$/.exec(e)}createButton.addEventListener("click",handleClickCreate);